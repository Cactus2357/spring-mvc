<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Book List</title>
</head>
<body class="d-flex flex-column h-100">
<main class="flex-shrink-0">
    <section layout:fragment="body" class="container py-5">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a class="text-decoration-none" th:href="@{/}">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Member list</li>
                </ol>
            </nav>
        </div>
        <div class="container px-5 my-5">
            <div class="container">
                <div class="row">
                    <form class="col-6" role="form" method="post" th:action="@{/members}">
                        <input type="hidden" id="member-id" name="memberId" hidden="hidden">
                        <div class="mb-3">
                            <label for="member-name" class="form-label">Username*</label>
                            <input type="text" class="form-control form-control-sm" id="member-name" name="name"
                                   placeholder="Username..." required>
                        </div>
                        <div class="mb-3">
                            <label for="member-email" class="form-label">Email*</label>
                            <input type="email" class="form-control form-control-sm" id="member-email" name="email"
                                   placeholder="Email address..." required>
                        </div>
                        <div class="mb-3">
                            <label for="member-membership-type" class="form-label">Membership</label>
                            <select class="form-select form-select-sm" name="membershipType" id="member-membership-type">
                                <option value="standard">Standard (default)</option>
                                <option value="premium">Premium</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-sm btn-primary col-6">Submit</button>
                        <button type="reset" class="btn btn-sm btn-secondary col-3">Clear</button>
                    </form>

                </div>
            </div>
            <hr>
            <div class="container">
                <table id="member-table" class="table"></table>
                <script th:inline="javascript">
                    //<![CDATA[
                    $(function () {
                        "use strict";
                        const data = /*[[${memberList}]]*/ '[]';
                        $("#member-table").jqGrid({
                            data: data,
                            colModel: [
                                {name: "memberId", label: "ID", width: 50, key: true},
                                {name: "name", label: "Name", width: 150},
                                {name: "email", label: "Email", width: 200},
                                {name: "joinDate", label: "Join date", width: 150, sorttype: "date",formatter: "date",formatoptions: {newformat: "d-M-Y"}},
                                {name: "membershipType", label: "Membership", width: 100},
                            ],
                            guiStyle: "bootstrap",
                            iconSet: "fontAwesome",
                            caption: "Book table",
                            pager: "#pager",
                            onSelectRow: function (rowId) {
                                const rowData = $(this).jqGrid('getRowData', rowId);
                                $("#member-id").val(rowData.memberId);
                                $("#member-name").val(rowData.name);
                                $("#member-email").val(rowData.email);
                                $("#member-membership-type").val(rowData.membershipType);
                            }
                        });
                    });
                    //]]>
                    $.ajax('')
                </script>
            </div>
        </div>
    </section>
</main>
</body>
</html>